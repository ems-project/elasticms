{
    "form": "[{\"id\":\"524d3c42-3253-42a8-af56-26225c294ace\",\"label\":\"firstname\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"firstname\",\"name\":\"firstname\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Text\",\"fr\":{\"label\":\"Votre pr\u00e9nom\"},\"nl\":{\"label\":\"Uw voornaam\"}},\"children\":[]},{\"id\":\"46cc80ff-9239-4258-8496-ca6a62a6ab41\",\"label\":\"name\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"name\",\"name\":\"name\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Text\",\"fr\":{\"label\":\"Votre nom\"},\"nl\":{\"label\":\"Uw naam\"}},\"children\":[]},{\"id\":\"f711e510-aee2-479a-820a-496b375e00bf\",\"label\":\"email\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"email\",\"name\":\"email\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Email\",\"class\":\"required\",\"fr\":{\"label\":\"Votre adresse e-mail\"},\"nl\":{\"label\":\"Uw e-mailadres\"}},\"children\":[{\"id\":\"bc3c6dcf-59d1-4623-b53f-1a92157e5ee3\",\"label\":\"Required\",\"type\":\"form_validation\",\"object\":{\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Validation\\\\Required\",\"label\":\"Required\"},\"children\":[]},{\"id\":\"20489aba-073e-4930-9ec0-d572e4ee2393\",\"label\":\"Email\",\"type\":\"form_validation\",\"object\":{\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Validation\\\\Email\",\"label\":\"Email\"},\"children\":[]}]},{\"id\":\"08ab515c-6b50-41ac-a6c0-947d99128846\",\"label\":\"institution\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"institution\",\"name\":\"institution\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Text\",\"fr\":{\"label\":\"Votre institution\"},\"nl\":{\"label\":\"Uw organisatie\"}},\"children\":[]},{\"id\":\"9714e166-2cf6-4191-9c6f-ef2f64d899ef\",\"label\":\"usage\",\"type\":\"form_structure_field\",\"object\":{\"name\":\"usage\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\ChoiceRadios\",\"fr\":{\"label\":\"\u00c0 quelle fr\u00e9quence utilisez-vous elasticMS ?\"},\"nl\":{\"label\":\"Hoe vaak gebruikt u elasticMS?\"},\"label\":\"usage\"},\"children\":[{\"id\":\"da20f273-3dea-41a7-be60-6c06d6eb3bfd\",\"label\":\"daily\",\"type\":\"form_choice\",\"object\":{\"label\":\"daily\",\"values\":\"[\\\"daily\\\", \\\"weekly\\\", \\\"monthly\\\", \\\"never\\\"]\",\"fr\":{\"labels\":\"[\\\"Tous les jours\\\", \\\"Une fois par semaine\\\", \\\"Une fois par mois\\\", \\\"Jamais\\\"]\"},\"nl\":{\"labels\":\"[\\\"Dagelijks\\\", \\\"1 keer per week\\\", \\\"1 keer per maand\\\", \\\"Nooit\\\"]\"}},\"children\":[]}]},{\"id\":\"2f8d01ad-2a7e-4b91-80db-21390d8df607\",\"label\":\"Submit\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"Submit\",\"name\":\"Submit\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Submit\",\"class\":\"btn-outline-primary text-uppercase mt-4\",\"fr\":{\"label\":\"S'inscrire\"},\"nl\":{\"label\":\"Inschrijven\"},\"show_hide\":\"show\",\"all_any\":\"any\"},\"children\":[]}]",
    "form_template": "@EMSCH/template/form/bootstrap_4_with_visibility.html.twig",
    "label": "User group form",
    "name": "User group form",
    "submissions": "[{\"id\":\"9a5b5e32-2373-422b-9d97-4b74aea6fa5b\",\"label\":\"mini_crm (HttpHandler)\",\"type\":\"submission\",\"object\":{\"label\":\"mini_crm (HttpHandler)\",\"name\":\"mini_crm\",\"type\":\"EMS\\\\SubmissionBundle\\\\Handler\\\\HttpHandler\",\"endpoint\":\"{\\r\\n  \\\"method\\\": \\\"POST\\\",\\r\\n  \\\"url\\\": \\\"{{ app.request.server.all['EMSCH_BACKEND_URL']|default('http://local.ems-demo-admin.localhost:9000') }}/api/forms/submissions\\\",\\r\\n  \\\"headers\\\": {\\r\\n    \\\"Content-Type\\\": \\\"application/json\\\",\\r\\n    \\\"X-Auth-Token\\\": \\\"{{ app.request.server.all['EMSF_AUTHKEY'] }}\\\"\\r\\n  },\\r\\n  \\\"timeout\\\": 30\\r\\n}\",\"message\":\"{%- block requestBody -%}\\r\\n\\r\\n    {#{%- set files = formData.allFiles|default([])|map(v => v.toArray|merge({ 'base64': v.base64() }) )|map(f => {#}\\r\\n    {#    'filename': ('attachment '~f.filename)|ems_webalize,#}\\r\\n    {#    'mimeType': f.mimeType,#}\\r\\n    {#    'size': f.size,#}\\r\\n    {#    'form_field': f.form_field,#}\\r\\n    {#    'base64': f.base64#}\\r\\n    {#})|filter(v => v.size > 0) -%}#}\\r\\n\\r\\n    {%- set message = {\\r\\n        'form_name': config.name,\\r\\n        'instance': config.translationDomain,\\r\\n        'locale': config.locale,\\r\\n        'data': {},\\r\\n        'label': \\\"Contact\\\",\\r\\n        'expire_date': '+1 month'|date('Y-m-d')\\r\\n    } -%}\\r\\n    \\r\\n    {{- message|json_encode|raw -}}\\r\\n{%- endblock -%}\\r\\n\\r\\n{%- block handleResponseExtra -%}\\r\\n    {%- set extra = {\\r\\n        'uid': (response.getHttpResponseContentJSON.submission_id)\\r\\n    } -%}\\r\\n    {{- extra|json_encode|raw -}}\\r\\n{%- endblock -%}\"},\"children\":[]},{\"id\":\"43df48bc-8cc6-4e7d-8eb5-58140cb27d63\",\"label\":\"submission-webagency (EmailHandler)\",\"type\":\"submission\",\"object\":{\"label\":\"submission-webagency (EmailHandler)\",\"name\":\"submission-webagency\",\"type\":\"EMS\\\\SubmissionBundle\\\\Handler\\\\EmailHandler\",\"endpoint\":\"ems_promo_site@smals.be\",\"message\":\"{%- set fields = [] -%}\\r\\n{%- set elements = config.elements -%}\\r\\n\\r\\n{%- for name, value in data|filter((v, k) => not (k == 'attachments')) -%}\\r\\n    {%- set element = elements|filter(v => v.name == name)|first -%}\\r\\n    {%- set fields = fields|merge({(name): {\\r\\n        'name': name,\\r\\n        'value': value,\\r\\n        'label': (element.label|default('')),\\r\\n        'class': (element.class|default(''))\\r\\n    } }) -%}\\r\\n{%- endfor -%}\\r\\n\\r\\n{%- set body -%}\\r\\n<body>\\r\\n    <p>\\r\\n        A contact form has been submited with reference {{ responses.0.extra.uid }}:\\r\\n    </p>\\r\\n    <ul>\\r\\n        <li>Firstname: {{ fields.firstname.value }}</li>\\r\\n        <li>Lastname: {{ fields.name.value }}</li>\\r\\n        <li>Email: {{ fields.email.value }}</li>\\r\\n        <li>Institution: {{ fields.institution.value }}</li>\\r\\n        <li>Usage: {{ fields.usage.value }}</li>\\r\\n    </ul>\\r\\n    <p>\\r\\n        Kind regards.\\r\\n    </p>\\r\\n</body>\\r\\n{%- endset -%}\\r\\n\\r\\n{#{%- set files = {} -%}#}\\r\\n{#{%- for file in formData.allFiles|map(v => v.toArray) -%}#}\\r\\n{#    {%- set files = files|merge({(file.form_field):{#}\\r\\n{#        filename: file.filename|ems_webalize,#}\\r\\n{#        originalName: file.filename|ems_webalize,#}\\r\\n{#        mimeType: file.mimeType,#}\\r\\n{#        pathname: file.pathname,#}\\r\\n{#    } }) -%}#}\\r\\n{#{%- endfor -%}#}\\r\\n\\r\\n{%- set mail = {\\r\\n    \\\"from\\\": \\\"no_reply@smals.be\\\",\\r\\n    \\\"subject\\\": \\\"Form submission from user group form\\\",\\r\\n    \\\"body\\\": body\\r\\n} -%}\\r\\n\\r\\n{#{%- if files|length > 0 -%}#}\\r\\n{#    {%- set mail = mail|merge({\\\"attachments\\\": files}) -%}#}\\r\\n{#{%- endif -%}#}\\r\\n{{- mail|json_encode|raw -}}\"},\"children\":[]}]"
}
