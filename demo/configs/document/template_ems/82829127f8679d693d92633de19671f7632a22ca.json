{
    "body": "{%  block ems_post_processing %}\n{%- apply spaceless %}\n    {% if finalize %}\n        {% set paths = {} %}\n        {% set config = 'config'|i18n('en')|json_decode %}\n        {% set locales = config.locales|default([]) %}\n        {% set baseUrl = {} %}\n        {% for locale in locales %}\n            {% set baseUrl = baseUrl|merge({(locale): ''}) %}\n        {%  endfor %}\n        {% set structure = _source.structure|default('{}')|ems_json_menu_nested_decode %}\n        {% for item in structure %}\n            {% set path = [] %}\n            {% for p in item.path %}\n                {% for locale in locales %}\n                    {%- set path = path|merge({(locale): attribute(path, locale)|default([])|merge([attribute(p.object, locale).title|default(null)])}) -%}\n                {% endfor %}\n            {% endfor %}\n\n            {% for locale in locales|filter(locale => attribute(path, locale)|length > 0 and null not in attribute(path, locale)) %}\n                {% set paths = paths|merge([{\n                    'uid': (item.id),\n                    'path' : attribute(baseUrl, locale) ~ (attribute(path, locale)|map(p => p|ems_webalize)|join('/')|default('/')),\n                    'locale' : locale,\n                }]) %}\n            {% endfor %}\n\n        {% endfor %}\n        {{ paths|default([])|json_encode|raw }}\n    {% endif %}\n{% endapply -%}\n{% endblock %}\n\n{%  block ems_value %}\n    {%- if _source.paths|default(false) -%}\n        {{- _source.paths|json_encode|raw -}}\n    {%- endif -%}\n{% endblock %}\n\n{%  block ems_display %}\n    {% set config = 'config'|i18n('en')|json_decode %}\n    {% set locales = config.locales|default([]) %}\n    <ul>\n        {% for locale in locales %}\n            {% if data|default([])|filter(item => locale == item.locale)|length > 0 %}\n                <li> {{ ('locale.'~locale)|i18n }}:\n                    <ul>\n                        {% for item in data|filter(item => locale == item.locale) %}\n                            <li>\n                                {{ item.path }}\n                            </li>\n                        {% endfor %}\n                    </ul>\n                </li>\n            {% endif %}\n        {% endfor %}\n    </ul>\n{% endblock %}\n",
    "name": "content_type/compute_paths.twig"
}