{
    "form": "[{\"id\":\"f711e510-aee2-479a-820a-496b375e00bf\",\"label\":\"email\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"email\",\"name\":\"email\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Email\",\"default\":\"demo@example.com\",\"en\":{\"label\":\"email\",\"placeholder\":\"demo@example.com\",\"help\":\"demo@example.com\"},\"fr\":{\"label\":\"email\",\"placeholder\":\"demo@example.com\",\"help\":\"demo@example.com\"},\"nl\":{\"label\":\"email\",\"placeholder\":\"demo@example.com\",\"help\":\"demo@example.com\"},\"de\":{\"label\":\"email\",\"placeholder\":\"demo@example.com\",\"help\":\"demo@example.com\"}},\"children\":[]},{\"id\":\"aee252f6-b570-4af2-bf1c-5caba8da13a1\",\"label\":\"comment\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"comment\",\"name\":\"comment\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Textarea\",\"en\":{\"label\":\"Comment\"},\"fr\":{\"label\":\"Comment\"},\"nl\":{\"label\":\"Comment\"},\"de\":{\"label\":\"Comment\"},\"show_hide\":\"show\",\"all_any\":\"any\",\"rules\":[{\"field\":\"[email]\",\"condition\":\"is\",\"value\":\"demo@example.com\"}]},\"children\":[]},{\"id\":\"a9baa101-45d9-4185-abbf-242d849f2840\",\"label\":\"test_markup\",\"type\":\"form_structure_markup\",\"object\":{\"label\":\"test_markup\",\"fr\":{\"markup\":\"<p>markup</p>\"},\"nl\":{\"markup\":\"<p>markup</p>\"},\"de\":{\"markup\":\"<p>markup</p>\"},\"en\":{\"markup\":\"<p>markup</p>\"},\"show_hide\":\"show\",\"all_any\":\"any\",\"rules\":[{\"field\":\"[email]\",\"condition\":\"is\",\"value\":\"demo@example.com\"}]},\"children\":[]},{\"id\":\"2f8d01ad-2a7e-4b91-80db-21390d8df607\",\"label\":\"Submit\",\"type\":\"form_structure_field\",\"object\":{\"label\":\"Submit\",\"name\":\"Submit\",\"classname\":\"EMS\\\\FormBundle\\\\Components\\\\Field\\\\Submit\",\"class\":\"btn btn-primary\",\"en\":{\"label\":\"Submit\"},\"fr\":{\"label\":\"Submit\"},\"nl\":{\"label\":\"Submit\"},\"de\":{\"label\":\"Submit\"},\"show_hide\":\"show\",\"all_any\":\"any\",\"rules\":[{\"field\":\"[email]\",\"condition\":\"is\",\"value\":\"demo@example.com\"}]},\"children\":[]}]",
    "form_template": "@EMSCH/template/form/bootstrap_4_with_visibility.html.twig",
    "label": "Contact form",
    "name": "Contact form",
    "submissions": "[{\"id\":\"9a5b5e32-2373-422b-9d97-4b74aea6fa5b\",\"label\":\"mini_crm (HttpHandler)\",\"type\":\"submission\",\"object\":{\"label\":\"mini_crm (HttpHandler)\",\"name\":\"mini_crm\",\"type\":\"EMS\\\\SubmissionBundle\\\\Handler\\\\HttpHandler\",\"endpoint\":\"{\\r\\n  \\\"method\\\": \\\"POST\\\",\\r\\n  \\\"url\\\": \\\"http://demo-pgsql-admin-dev.localhost:9000/api/forms/submissions\\\",\\r\\n  \\\"headers\\\": {\\r\\n    \\\"Content-Type\\\": \\\"application/json\\\",\\r\\n    \\\"X-Auth-Token\\\": \\\"/gKVMoqG/FdCrVD5rFlplhGEkRNH+GqN3N+S6toO1FsNb+J5YK1jIRkbc+hdxrZ5qYc=\\\"\\r\\n  },\\r\\n  \\\"timeout\\\": 30\\r\\n}\",\"message\":\"{%- block requestBody -%}\\r\\n\\r\\n    {%- set files = formData.allFiles|default([])|map(v => v.toArray|merge({ 'base64': v.base64() }) )|map(f => {\\r\\n        'filename': ('attachment '~f.filename)|ems_webalize,\\r\\n        'mimeType': f.mimeType,\\r\\n        'size': f.size,\\r\\n        'form_field': f.form_field,\\r\\n        'base64': f.base64\\r\\n    })|filter(v => v.size > 0) -%}\\r\\n\\r\\n    {%- set message = {\\r\\n        'form_name': config.name,\\r\\n        'instance': config.translationDomain,\\r\\n        'locale': config.locale,\\r\\n        'data': data,\\r\\n        'files': files,\\r\\n        'label': \\\"Contact from #{data.email}\\\",\\r\\n        'expire_date': '+1 month'|date(constant('\\\\\\\\DateTimeInterface::ATOM'))\\r\\n    } -%}\\r\\n    \\r\\n    {{- message|json_encode|raw -}}\\r\\n{%- endblock -%}\\r\\n\\r\\n{%- block handleResponseExtra -%}\\r\\n    {%- set extra = {\\r\\n        'uid': (response.getHttpResponseContentJSON.submission_id)\\r\\n    } -%}\\r\\n    {{- extra|json_encode|raw -}}\\r\\n{%- endblock -%}\"},\"children\":[]},{\"id\":\"84c1fc6f-aa6d-43f6-9cb3-439251fa9ddd\",\"label\":\"submission-contact (EmailHandler)\",\"type\":\"submission\",\"object\":{\"label\":\"submission-contact (EmailHandler)\",\"name\":\"submission-contact\",\"type\":\"EMS\\\\SubmissionBundle\\\\Handler\\\\EmailHandler\",\"endpoint\":\"demo@example.com\",\"message\":\"{%- set fields = [] -%}\\r\\n{%- set elements = config.elements -%}\\r\\n\\r\\n{%- for name, value in data|filter((v, k) => not (k == 'attachments')) -%}\\r\\n    {%- set element = elements|filter(v => v.name == name)|first -%}\\r\\n    {%- set fields = fields|merge({(name): {\\r\\n        'name': name,\\r\\n        'value': value,\\r\\n        'label': (element.label|default('')),\\r\\n        'class': (element.class|default(''))\\r\\n    } }) -%}\\r\\n{%- endfor -%}\\r\\n\\r\\n{%- set body -%}\\r\\n    A contact form has been submited with reference {{ responses.0.extra.uid }}\\r\\n    {{ \\\"--- ORIGINAL JSON DATA ---\\\" }}\\r\\n    {{ fields|default([])|json_encode|raw }}\\r\\n{%- endset -%}\\r\\n\\r\\n{%- set files = {} -%}\\r\\n{%- for file in formData.allFiles|map(v => v.toArray) -%}\\r\\n    {%- set files = files|merge({(file.form_field):{\\r\\n        filename: file.filename|ems_webalize,\\r\\n        originalName: file.filename|ems_webalize,\\r\\n        mimeType: file.mimeType,\\r\\n        pathname: file.pathname,\\r\\n    } }) -%}\\r\\n{%- endfor -%}\\r\\n\\r\\n{%- set mail = {\\r\\n    \\\"from\\\": \\\"no_reply@onem.be\\\",\\r\\n    \\\"subject\\\": \\\"Form submission from contact form\\\",\\r\\n    \\\"body\\\": body\\r\\n} -%}\\r\\n\\r\\n{%- if files|length > 0 -%}\\r\\n    {%- set mail = mail|merge({\\\"attachments\\\": files}) -%}\\r\\n{%- endif -%}\\r\\n{{- mail|json_encode|raw -}}\"},\"children\":[]}]"
}